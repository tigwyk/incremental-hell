{"remainingRequest":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\Game.ts","dependencies":[{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\Game.ts","mtime":1655094853930},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655271851080},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js","mtime":1655271854201},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js","mtime":1655271854628},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js","mtime":1655271851823}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9Vc2Vycy9MZWUvRG9jdW1lbnRzL0dpdEh1Yi9pbmNyZW1lbnRhbC1oZWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tICIuL0dhbWVTdGF0ZSI7CmltcG9ydCB7IExvY2FsU3RvcmFnZSB9IGZyb20gIkAvZW5naW5lL3Rvb2xzL3NhdmluZy9Mb2NhbFN0b3JhZ2UiOwppbXBvcnQgeyBEZXZlbG9wZXJQYW5lbCB9IGZyb20gIkAvZW5naW5lL2RldmVsb3Blci1wYW5lbC9EZXZlbG9wZXJQYW5lbCI7CmltcG9ydCB7IERldmVsb3BlclBhbmVsVGFiIH0gZnJvbSAiQC9lbmdpbmUvZGV2ZWxvcGVyLXBhbmVsL0RldmVsb3BlclBhbmVsVGFiIjsKaW1wb3J0IHsgRnVuY3Rpb25GaWVsZCB9IGZyb20gIkAvZW5naW5lL2RldmVsb3Blci1wYW5lbC9maWVsZHMvRnVuY3Rpb25GaWVsZCI7CmltcG9ydCB7IERpc3BsYXlGaWVsZCB9IGZyb20gIkAvZW5naW5lL2RldmVsb3Blci1wYW5lbC9maWVsZHMvRGlzcGxheUZpZWxkIjsKaW1wb3J0IHsgQ2hvaWNlRmllbGQgfSBmcm9tICJAL2VuZ2luZS9kZXZlbG9wZXItcGFuZWwvZmllbGRzL0Nob2ljZUZpZWxkIjsKaW1wb3J0IHsgU2lnbmFsRGlzcGF0Y2hlciB9IGZyb20gInN0cm9uZ2x5LXR5cGVkLWV2ZW50cyI7CmV4cG9ydCB2YXIgR2FtZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gR2FtZShmZWF0dXJlcykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWUpOwoKICAgIHRoaXMuX3RpY2tJbnRlcnZhbCA9IC0xOwogICAgdGhpcy5USUNLX0RVUkFUSU9OID0gMC4xOwogICAgdGhpcy5TQVZFX0lOVEVSVkFMID0gMzA7CiAgICB0aGlzLl9uZXh0U2F2ZSA9IHRoaXMuU0FWRV9JTlRFUlZBTDsKICAgIHRoaXMuZ2FtZVNwZWVkID0gMTsKICAgIHRoaXMuX2xhc3RVcGRhdGUgPSAwOwogICAgLyoqDQogICAgICogRW1pdHRlZCB3aGVuZXZlciB0aGUgZ2FtZSBzYXZlcw0KICAgICAqLwoKICAgIHRoaXMuX29uU2F2ZSA9IG5ldyBTaWduYWxEaXNwYXRjaGVyKCk7CiAgICAvKioNCiAgICAgKiBNYWtlIHN1cmUgdGhpcyBrZXkgaXMgdW5pcXVlIHRvIHlvdXIgZ2FtZS4NCiAgICAgKiBPdGhlcndpc2UgeW91IG1pZ2h0IHJ1biBpbnRvIGxvYWRpbmcgY29uZmxpY3RzIHdoZW4gbXVsdGlwbGUgZ2FtZXMgYXJlIGhvc3RlZCBvbiB0aGUgc2FtZSBkb21haW4gKHN1Y2ggYXMgPHVzZXJuYW1lLmdpdGh1Yi5pby9nYW1lKQ0KICAgICAqLwoKICAgIHRoaXMuU0FWRV9LRVkgPSAiaW5jcmVtZW50YWwtaGVsbCI7CiAgICB0aGlzLmZlYXR1cmVzID0gZmVhdHVyZXM7CiAgICB0aGlzLnN0YXRlID0gR2FtZVN0YXRlLkxhdW5jaGluZzsKICB9CgogIF9jcmVhdGVDbGFzcyhHYW1lLCBbewogICAga2V5OiAib25TYXZlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb25TYXZlLmFzRXZlbnQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXREZXZlbG9wZXJQYW5lbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGV2ZWxvcGVyUGFuZWwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBTdGFydCB3aXRoIHBsYXkgYnV0dG9ucyBmb3IgdGhlIGdhbWUKICAgICAgdmFyIHRhYnMgPSBbbmV3IERldmVsb3BlclBhbmVsVGFiKCdHYW1lJywgW25ldyBEaXNwbGF5RmllbGQoJ3N0YXRlJywgJ1N0YXRlJykuc2V0T2JqZWN0KHRoaXMpLCBuZXcgQ2hvaWNlRmllbGQoJ2dhbWVTcGVlZCcsIFtbJzAuNXgnLCAwLjVdLCBbJzF4JywgMV0sIFsnMngnLCAyXSwgWyc0eCcsIDRdXSwgJ0dhbWUgc3BlZWQnKS5zZXRPYmplY3QodGhpcyksIG5ldyBGdW5jdGlvbkZpZWxkKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5zdGFydCgpOwogICAgICB9LCAnU3RhcnQnKS5zZXRDc3NDbGFzcygnYnRuLWdyZWVuJyksIG5ldyBGdW5jdGlvbkZpZWxkKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5wYXVzZSgpOwogICAgICB9LCAnUGF1c2UnKS5zZXRDc3NDbGFzcygnYnRuLWJsdWUnKSwgbmV3IEZ1bmN0aW9uRmllbGQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnJlc3VtZSgpOwogICAgICB9LCAnUmVzdW1lJykuc2V0Q3NzQ2xhc3MoJ2J0bi1ncmVlbicpLCBuZXcgRnVuY3Rpb25GaWVsZChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc3RvcCgpOwogICAgICB9LCAnU3RvcCcpLnNldENzc0NsYXNzKCdidG4tcmVkJyldKV07CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5mZWF0dXJlTGlzdCksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBmZWF0dXJlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB2YXIgZmllbGRzID0gZmVhdHVyZS5nZXREZXZlbG9wZXJQYW5lbEZpZWxkcygpOyAvLyBJbmplY3QgdGhlIGZlYXR1cmUgaW50byB0aGUgcmVzb3VyY2UuCgogICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihmaWVsZHMpLAogICAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBmaWVsZCA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICBmaWVsZC5zZXRPYmplY3QoZmVhdHVyZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciB0YWIgPSBuZXcgRGV2ZWxvcGVyUGFuZWxUYWIoZmVhdHVyZS5zYXZlS2V5LCBmaWVsZHMpOwoKICAgICAgICAgIGlmICghdGFiLmlzRW1wdHkoKSkgewogICAgICAgICAgICB0YWJzLnB1c2godGFiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBEZXZlbG9wZXJQYW5lbCh0YWJzKTsKICAgIH0KICAgIC8qKg0KICAgICAqIFVwZGF0ZSBhbGwgZmVhdHVyZXMNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7CiAgICAgIHZhciB0aW1lRGlmZmVyZW5jZSA9IG5vdyAtIHRoaXMuX2xhc3RVcGRhdGU7CgogICAgICBpZiAodGhpcy5zdGF0ZSAhPSBHYW1lU3RhdGUuUGxheWluZykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRlbHRhID0gdGltZURpZmZlcmVuY2UgKiB0aGlzLmdhbWVTcGVlZDsKCiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5mZWF0dXJlTGlzdCksCiAgICAgICAgICBfc3RlcDM7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZmVhdHVyZSA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgIGZlYXR1cmUudXBkYXRlKGRlbHRhKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CgogICAgICB0aGlzLl9sYXN0VXBkYXRlID0gbm93OwogICAgICB0aGlzLl9uZXh0U2F2ZSAtPSBkZWx0YTsKCiAgICAgIGlmICh0aGlzLl9uZXh0U2F2ZSA8PSAwKSB7CiAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgdGhpcy5fbmV4dFNhdmUgPSB0aGlzLlNBVkVfSU5URVJWQUw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUb3RhbEN1cnJlbmN5TXVsdGlwbGllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG90YWxDdXJyZW5jeU11bHRpcGxpZXIodHlwZSkgewogICAgICB2YXIgbXVsdGlwbGllciA9IDE7CgogICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZmVhdHVyZUxpc3QpLAogICAgICAgICAgX3N0ZXA0OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGZlYXR1cmUgPSBfc3RlcDQudmFsdWU7CiAgICAgICAgICBtdWx0aXBsaWVyICo9IGZlYXR1cmUuZ2V0VG90YWxDdXJyZW5jeU11bHRpcGxpZXIodHlwZSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG11bHRpcGxpZXI7CiAgICB9CiAgICAvKioNCiAgICAgKiBJbml0aWFsaXplIGFsbCBmZWF0dXJlcw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpbml0aWFsaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKCkgewogICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZmVhdHVyZUxpc3QpLAogICAgICAgICAgX3N0ZXA1OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGZlYXR1cmUgPSBfc3RlcDUudmFsdWU7CiAgICAgICAgICBmZWF0dXJlLmluaXRpYWxpemUodGhpcy5mZWF0dXJlcyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICogU3RhcnQgdGhlIG1haW4gdXBkYXRlIGxvb3ANCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBHYW1lU3RhdGUuU3RvcHBlZCAmJiB0aGlzLnN0YXRlICE9PSBHYW1lU3RhdGUuTGF1bmNoaW5nKSB7CiAgICAgICAgdGhpcy5wcmludFN0YXRlV2FybmluZygiQ2Fubm90IHN0YXJ0IHRoZSBnYW1lIHR3aWNlLiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmZlYXR1cmVMaXN0KSwKICAgICAgICAgIF9zdGVwNjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBmZWF0dXJlID0gX3N0ZXA2LnZhbHVlOwogICAgICAgICAgZmVhdHVyZS5zdGFydCgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuX2xhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7CiAgICAgIHRoaXMuX3RpY2tJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnVwZGF0ZSgpOwogICAgICB9LCB0aGlzLlRJQ0tfRFVSQVRJT04gKiAxMDAwKTsKICAgICAgdGhpcy5zdGF0ZSA9IEdhbWVTdGF0ZS5QbGF5aW5nOwogICAgICBjb25zb2xlLmRlYnVnKCJHYW1lIFN0YXJ0ZWQiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwYXVzZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7CiAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBHYW1lU3RhdGUuUGxheWluZykgewogICAgICAgIHRoaXMucHJpbnRTdGF0ZVdhcm5pbmcoIkNhbm5vdCBwYXVzZSB0aGUgZ2FtZSBpZiB3ZSdyZSBub3QgcGxheWluZy4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fdGlja0ludGVydmFsKTsKICAgICAgdGhpcy5zdGF0ZSA9IEdhbWVTdGF0ZS5QYXVzZWQ7CiAgICAgIGNvbnNvbGUuZGVidWcoIkdhbWUgUGF1c2VkIik7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzdW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWUoKSB7CiAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBHYW1lU3RhdGUuUGF1c2VkKSB7CiAgICAgICAgdGhpcy5wcmludFN0YXRlV2FybmluZygiQ2Fubm90IHJlc3VtZSB0aGUgZ2FtZSBpZiB3ZSdyZSBub3QgcGF1c2VkLiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5fbGFzdFVwZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDsgLy8gdGhpcy5fdGlja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy51cGRhdGUoKSwgdGhpcy5USUNLX0RVUkFUSU9OICogMTAwMCk7CgogICAgICB0aGlzLnN0YXRlID0gR2FtZVN0YXRlLlBsYXlpbmc7CiAgICAgIGNvbnNvbGUuZGVidWcoIkdhbWUgUmVzdW1lZCIpOwogICAgfQogICAgLyoqDQogICAgICogU3RvcCB0aGUgbWFpbiB1cGRhdGUgbG9vcA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gR2FtZVN0YXRlLlN0b3BwZWQpIHsKICAgICAgICB0aGlzLnByaW50U3RhdGVXYXJuaW5nKCJDYW5ub3Qgc3RvcCB0aGUgZ2FtZSBpZiB3ZSdyZSBhbHJlYWR5IHN0b3BwZWQuIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjbGVhckludGVydmFsKHRoaXMuX3RpY2tJbnRlcnZhbCk7CgogICAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZmVhdHVyZUxpc3QpLAogICAgICAgICAgX3N0ZXA3OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGZlYXR1cmUgPSBfc3RlcDcudmFsdWU7CiAgICAgICAgICBmZWF0dXJlLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjcuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjcuZigpOwogICAgICB9CgogICAgICB0aGlzLnN0YXRlID0gR2FtZVN0YXRlLlN0b3BwZWQ7CiAgICAgIGNvbnNvbGUuZGVidWcoIlN0b3BwZWQiKTsKICAgIH0KICAgIC8qKg0KICAgICAqIFJlY3Vyc2l2ZWx5IHNhdmUgYWxsIHJlZ2lzdGVyZWQgZmVhdHVyZXMNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIHJlcyA9IHt9OwoKICAgICAgdmFyIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmZlYXR1cmVMaXN0KSwKICAgICAgICAgIF9zdGVwODsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I4LnMoKTsgIShfc3RlcDggPSBfaXRlcmF0b3I4Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBmZWF0dXJlID0gX3N0ZXA4LnZhbHVlOwogICAgICAgICAgcmVzW2ZlYXR1cmUuc2F2ZUtleV0gPSBmZWF0dXJlLnNhdmUoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjguZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjguZigpOwogICAgICB9CgogICAgICBMb2NhbFN0b3JhZ2Uuc3RvcmUodGhpcy5TQVZFX0tFWSwgcmVzKTsKCiAgICAgIHRoaXMuX29uU2F2ZS5kaXNwYXRjaCgpOwogICAgfQogICAgLyoqDQogICAgICogRGVsZXRlIHRoZSBsb2NhbGx5IHN0b3JlZCBzYXZlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImRlbGV0ZVNhdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZVNhdmUoKSB7CiAgICAgIExvY2FsU3RvcmFnZS5kZWxldGUodGhpcy5TQVZFX0tFWSk7CiAgICB9CiAgICAvKioNCiAgICAgKiBSZWN1cnNpdmVseSBsb2FkIGFsbCByZWdpc3RlcmVkIGZlYXR1cmVzDQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBzYXZlRGF0YSA9IExvY2FsU3RvcmFnZS5nZXQodGhpcy5TQVZFX0tFWSk7CgogICAgICBpZiAoc2F2ZURhdGEgPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmZlYXR1cmVMaXN0KSwKICAgICAgICAgIF9zdGVwOTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBmZWF0dXJlID0gX3N0ZXA5LnZhbHVlOwogICAgICAgICAgdmFyIGZlYXR1cmVTYXZlRGF0YSA9IHNhdmVEYXRhW2ZlYXR1cmUuc2F2ZUtleV07CgogICAgICAgICAgaWYgKGZlYXR1cmVTYXZlRGF0YSA9PSBudWxsKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZlYXR1cmUubG9hZChmZWF0dXJlU2F2ZURhdGEpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yOS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yOS5mKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcmludFN0YXRlV2FybmluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJpbnRTdGF0ZVdhcm5pbmcocmVhc29uKSB7CiAgICAgIGNvbnNvbGUud2FybigiQ3VycmVudCBzdGF0ZSA9ICIuY29uY2F0KHRoaXMuc3RhdGUsICIuIiksIHJlYXNvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmVhdHVyZUxpc3QiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuZmVhdHVyZXMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdhbWU7Cn0oKTs="},{"version":3,"sources":["C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\Game.ts"],"names":[],"mappings":"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","sourcesContent":["import {GameState} from \"./GameState\";\r\nimport {LocalStorage} from \"@/engine/tools/saving/LocalStorage\";\r\nimport {CurrencyType} from \"@/engine/features/wallet/CurrencyType\";\r\nimport {Features} from \"@/engine/Features\";\r\nimport {Feature} from \"@/engine/features/Feature\";\r\nimport {DeveloperPanel} from \"@/engine/developer-panel/DeveloperPanel\";\r\nimport {DeveloperPanelTab} from \"@/engine/developer-panel/DeveloperPanelTab\";\r\nimport {FunctionField} from \"@/engine/developer-panel/fields/FunctionField\";\r\nimport {DisplayField} from \"@/engine/developer-panel/fields/DisplayField\";\r\nimport {ChoiceField} from \"@/engine/developer-panel/fields/ChoiceField\";\r\nimport {Currency} from \"@/engine/features/wallet/Currency\";\r\nimport {ISignal, ISimpleEvent, SignalDispatcher, SimpleEventDispatcher} from \"strongly-typed-events\";\r\n\r\nexport class Game {\r\n    private _tickInterval: number = -1;\r\n\r\n    /**\r\n     * Object with registered features. If you want them as a list use this.featureList\r\n     */\r\n    public readonly features: Features;\r\n\r\n    public state: GameState;\r\n\r\n\r\n    protected readonly TICK_DURATION: number = 0.1;\r\n    private readonly SAVE_INTERVAL = 30;\r\n    private _nextSave = this.SAVE_INTERVAL;\r\n\r\n    private gameSpeed = 1;\r\n    private _lastUpdate: number = 0;\r\n\r\n    /**\r\n     * Emitted whenever the game saves\r\n     */\r\n    private _onSave = new SignalDispatcher();\r\n\r\n    public get onSave(): ISignal {\r\n        return this._onSave.asEvent();\r\n    }\r\n\r\n    /**\r\n     * Make sure this key is unique to your game.\r\n     * Otherwise you might run into loading conflicts when multiple games are hosted on the same domain (such as <username.github.io/game)\r\n     */\r\n    protected readonly SAVE_KEY: string = \"incremental-hell\";\r\n\r\n    constructor(features: Features) {\r\n        this.features = features;\r\n\r\n        this.state = GameState.Launching;\r\n    }\r\n\r\n    public getDeveloperPanel(): DeveloperPanel {\r\n        // Start with play buttons for the game\r\n        const tabs: DeveloperPanelTab[] = [\r\n            new DeveloperPanelTab('Game', [\r\n                new DisplayField('state', 'State').setObject(this),\r\n                new ChoiceField('gameSpeed', [\r\n                    ['0.5x', 0.5],\r\n                    ['1x', 1],\r\n                    ['2x', 2],\r\n                    ['4x', 4],\r\n                ], 'Game speed').setObject(this),\r\n                new FunctionField(() => {\r\n                    this.start()\r\n                }, 'Start').setCssClass('btn-green'),\r\n                new FunctionField(() => {\r\n                    this.pause()\r\n                }, 'Pause').setCssClass('btn-blue'),\r\n                new FunctionField(() => {\r\n                    this.resume()\r\n                }, 'Resume').setCssClass('btn-green'),\r\n                new FunctionField(() => {\r\n                    this.stop()\r\n                }, 'Stop').setCssClass('btn-red'),\r\n            ]),\r\n\r\n        ];\r\n\r\n\r\n        for (const feature of this.featureList) {\r\n            const fields = feature.getDeveloperPanelFields();\r\n\r\n            // Inject the feature into the resource.\r\n            for (const field of fields) {\r\n                field.setObject(feature);\r\n            }\r\n\r\n            const tab = new DeveloperPanelTab(feature.saveKey, fields)\r\n            if (!tab.isEmpty()) {\r\n                tabs.push(tab)\r\n            }\r\n        }\r\n        return new DeveloperPanel(tabs);\r\n    }\r\n\r\n    /**\r\n     * Update all features\r\n     */\r\n    public update(): void {\r\n        const now = new Date().getTime() / 1000;\r\n        const timeDifference = now - this._lastUpdate;\r\n\r\n        if (this.state != GameState.Playing) {\r\n            return;\r\n        }\r\n\r\n        const delta = timeDifference * this.gameSpeed;\r\n        for (const feature of this.featureList) {\r\n            feature.update(delta)\r\n        }\r\n\r\n        this._lastUpdate = now;\r\n        this._nextSave -= delta;\r\n        if (this._nextSave <= 0) {\r\n            this.save();\r\n            this._nextSave = this.SAVE_INTERVAL;\r\n        }\r\n    }\r\n\r\n    public getTotalCurrencyMultiplier(type: CurrencyType): number {\r\n        let multiplier = 1;\r\n        for (const feature of this.featureList) {\r\n            multiplier *= feature.getTotalCurrencyMultiplier(type);\r\n        }\r\n        return multiplier;\r\n    }\r\n\r\n    /**\r\n     * Initialize all features\r\n     */\r\n    public initialize(): void {\r\n        for (const feature of this.featureList) {\r\n            feature.initialize(this.features);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Start the main update loop\r\n     */\r\n    public start(): void {\r\n        if (this.state !== GameState.Stopped && this.state !== GameState.Launching) {\r\n            this.printStateWarning(\"Cannot start the game twice.\");\r\n            return;\r\n        }\r\n\r\n        for (const feature of this.featureList) {\r\n            feature.start();\r\n        }\r\n\r\n        this._lastUpdate = new Date().getTime() / 1000;\r\n        this._tickInterval = setInterval(() => this.update(), this.TICK_DURATION * 1000);\r\n\r\n        this.state = GameState.Playing;\r\n        console.debug(\"Game Started\");\r\n    }\r\n\r\n    public pause(): void {\r\n        if (this.state !== GameState.Playing) {\r\n            this.printStateWarning(\"Cannot pause the game if we're not playing.\");\r\n            return;\r\n        }\r\n        clearInterval(this._tickInterval);\r\n\r\n        this.state = GameState.Paused;\r\n        console.debug(\"Game Paused\");\r\n    }\r\n\r\n\r\n    public resume(): void {\r\n        if (this.state !== GameState.Paused) {\r\n            this.printStateWarning(\"Cannot resume the game if we're not paused.\");\r\n            return;\r\n        }\r\n\r\n        this._lastUpdate = new Date().getTime() / 1000;\r\n        // this._tickInterval = setInterval(() => this.update(), this.TICK_DURATION * 1000);\r\n\r\n        this.state = GameState.Playing;\r\n        console.debug(\"Game Resumed\");\r\n    }\r\n\r\n    /**\r\n     * Stop the main update loop\r\n     */\r\n    public stop(): void {\r\n        if (this.state === GameState.Stopped) {\r\n            this.printStateWarning(\"Cannot stop the game if we're already stopped.\");\r\n            return;\r\n        }\r\n        clearInterval(this._tickInterval);\r\n\r\n        for (const feature of this.featureList) {\r\n            feature.stop();\r\n        }\r\n\r\n        this.state = GameState.Stopped;\r\n        console.debug(\"Stopped\");\r\n    }\r\n\r\n    /**\r\n     * Recursively save all registered features\r\n     */\r\n    public save(): void {\r\n        const res: Record<string, unknown> = {};\r\n        for (const feature of this.featureList) {\r\n            res[feature.saveKey] = feature.save()\r\n        }\r\n        LocalStorage.store(this.SAVE_KEY, res)\r\n        this._onSave.dispatch();\r\n    }\r\n\r\n    /**\r\n     * Delete the locally stored save\r\n     */\r\n    public deleteSave(): void {\r\n        LocalStorage.delete(this.SAVE_KEY);\r\n    }\r\n\r\n    /**\r\n     * Recursively load all registered features\r\n     */\r\n    public load(): void {\r\n        const saveData = LocalStorage.get(this.SAVE_KEY)\r\n        if (saveData == null) {\r\n            return;\r\n        }\r\n        for (const feature of this.featureList) {\r\n            const featureSaveData: Record<string, unknown> = saveData[feature.saveKey] as Record<string, unknown>;\r\n            if (featureSaveData == null) {\r\n                continue;\r\n            }\r\n            feature.load(featureSaveData);\r\n        }\r\n    }\r\n\r\n    private printStateWarning(reason: string): void {\r\n        console.warn(`Current state = ${this.state}.`, reason);\r\n    }\r\n\r\n    private get featureList(): Feature[] {\r\n        return Object.values(this.features)\r\n    }\r\n}\r\n"],"sourceRoot":""}]}