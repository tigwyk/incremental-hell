{"remainingRequest":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js??ref--15-2!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\progressbars\\ProgressBar.ts","dependencies":[{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\progressbars\\ProgressBar.ts","mtime":1655092288577},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655271851080},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js","mtime":1655271854201},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js","mtime":1655271854628},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js","mtime":1655271851823}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9MZWUvRG9jdW1lbnRzL0dpdEh1Yi9pbmNyZW1lbnRhbC1oZWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvTGVlL0RvY3VtZW50cy9HaXRIdWIvaW5jcmVtZW50YWwtaGVsbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwZWF0LmpzIjsKZXhwb3J0IHZhciBQcm9ncmVzc0JhciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUHJvZ3Jlc3NCYXIoZ29hbCwgcmVxdWlyZW1lbnRzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZ3Jlc3NCYXIpOwoKICAgIHRoaXMudmFsdWUgPSAwOwogICAgdGhpcy5nb2FsID0gZ29hbDsKICAgIHRoaXMuaXNTdGFydGVkID0gZmFsc2U7CiAgICB0aGlzLnJlcXVpcmVtZW50cyA9IHJlcXVpcmVtZW50czsKICB9CgogIF9jcmVhdGVDbGFzcyhQcm9ncmVzc0JhciwgW3sKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHsKICAgICAgaWYgKHRoaXMuaXNTdGFydGVkKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJDYW5ub3Qgc3RhcnQgdHdpY2UiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuaXNTdGFydGVkID0gdHJ1ZTsKICAgICAgdGhpcy52YWx1ZSA9IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJvZ3Jlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2dyZXNzKGRlbHRhKSB7CiAgICAgIGlmICghdGhpcy5pc1N0YXJ0ZWQpIHsKICAgICAgICBpZiAodGhpcy5jYW5SZXBlYXQoKSkgewogICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnZhbHVlID0gTWF0aC5taW4odGhpcy5nb2FsLCB0aGlzLnZhbHVlICsgZGVsdGEpOwoKICAgICAgaWYgKHRoaXMuaXNDb21wbGV0ZWQoKSkgewogICAgICAgIHRoaXMuY29tcGxldGUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInBlcmNlbnRhZ2UiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlIC8gdGhpcy5nb2FsOwogICAgfQogIH0sIHsKICAgIGtleTogInJlcGVhdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwZWF0KCkgewogICAgICB0aGlzLnZhbHVlID0gMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0NvbXBsZXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDb21wbGV0ZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlID49IHRoaXMuZ29hbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wbGV0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgIHRoaXMuZ2FpblJld2FyZCgpOwoKICAgICAgaWYgKHRoaXMuY2FuUmVwZWF0KCkpIHsKICAgICAgICB0aGlzLnJlcGVhdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFsdWUgPSAwOwogICAgICAgIHRoaXMuaXNTdGFydGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBQcm9ncmVzc0JhcjsKfSgpOw=="},{"version":3,"sources":["C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\progressbars\\ProgressBar.ts"],"names":[],"mappings":";;;AAEA,WAAsB,WAAtB;EAOI,qBAAsB,IAAtB,EAAoC,YAApC,EAAkE;IAAA;;IAC9D,KAAK,KAAL,GAAa,CAAb;IACA,KAAK,IAAL,GAAY,IAAZ;IACA,KAAK,SAAL,GAAiB,KAAjB;IACA,KAAK,YAAL,GAAoB,YAApB;EACH;;EAZL;IAAA;IAAA,OAcW,iBAAK;MACR,IAAI,KAAK,SAAT,EAAoB;QAChB,OAAO,CAAC,IAAR,CAAa,oBAAb;QACA;MACH;;MACD,KAAK,SAAL,GAAiB,IAAjB;MACA,KAAK,KAAL,GAAa,CAAb;IACH;EArBL;IAAA;IAAA,OAuBW,kBAAS,KAAT,EAAsB;MACzB,IAAI,CAAC,KAAK,SAAV,EAAqB;QACjB,IAAI,KAAK,SAAL,EAAJ,EAAsB;UAClB,KAAK,KAAL;QACH;;QACD;MACH;;MACD,KAAK,KAAL,GAAa,IAAI,CAAC,GAAL,CAAS,KAAK,IAAd,EAAoB,KAAK,KAAL,GAAa,KAAjC,CAAb;;MAEA,IAAI,KAAK,WAAL,EAAJ,EAAwB;QACpB,KAAK,QAAL;MACH;IACJ;EAnCL;IAAA;IAAA,KAqCI,eAAc;MACV,OAAO,KAAK,KAAL,GAAa,KAAK,IAAzB;IACH;EAvCL;IAAA;IAAA,OA2CW,kBAAM;MACT,KAAK,KAAL,GAAa,CAAb;IACH;EA7CL;IAAA;IAAA,OA+CW,uBAAW;MACd,OAAO,KAAK,KAAL,IAAc,KAAK,IAA1B;IACH;EAjDL;IAAA;IAAA,OAmDW,oBAAQ;MACX,KAAK,UAAL;;MACA,IAAI,KAAK,SAAL,EAAJ,EAAsB;QAClB,KAAK,MAAL;MACH,CAFD,MAEO;QACH,KAAK,KAAL,GAAa,CAAb;QACA,KAAK,SAAL,GAAiB,KAAjB;MACH;IAEJ;EA5DL;;EAAA;AAAA","sourcesContent":["import {MultiRequirement} from \"@/engine/tools/requirements/MultiRequirement\";\r\n\r\nexport abstract class ProgressBar {\r\n    value: number;\r\n    goal: number;\r\n\r\n    isStarted: boolean;\r\n    requirements: MultiRequirement;\r\n\r\n    protected constructor(goal: number, requirements: MultiRequirement) {\r\n        this.value = 0;\r\n        this.goal = goal;\r\n        this.isStarted = false;\r\n        this.requirements = requirements;\r\n    }\r\n\r\n    public start() {\r\n        if (this.isStarted) {\r\n            console.warn(\"Cannot start twice\");\r\n            return;\r\n        }\r\n        this.isStarted = true;\r\n        this.value = 0;\r\n    }\r\n\r\n    public progress(delta: number) {\r\n        if (!this.isStarted) {\r\n            if (this.canRepeat()) {\r\n                this.start();\r\n            }\r\n            return;\r\n        }\r\n        this.value = Math.min(this.goal, this.value + delta);\r\n\r\n        if (this.isCompleted()) {\r\n            this.complete();\r\n        }\r\n    }\r\n\r\n    get percentage() {\r\n        return this.value / this.goal;\r\n    }\r\n\r\n    public abstract canRepeat(): boolean;\r\n\r\n    public repeat() {\r\n        this.value = 0;\r\n    }\r\n\r\n    public isCompleted() {\r\n        return this.value >= this.goal;\r\n    }\r\n\r\n    public complete() {\r\n        this.gainReward();\r\n        if (this.canRepeat()) {\r\n            this.repeat();\r\n        } else {\r\n            this.value = 0;\r\n            this.isStarted = false;\r\n        }\r\n\r\n    }\r\n\r\n    abstract gainReward(): void;\r\n}\r\n"],"sourceRoot":""}]}