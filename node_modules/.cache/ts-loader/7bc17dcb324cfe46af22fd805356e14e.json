{"remainingRequest":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js??ref--15-3!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\features\\inventory\\Inventory.ts","dependencies":[{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\features\\inventory\\Inventory.ts","mtime":1655089476394},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655271851080},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1655271851050},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js","mtime":1655271854201},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js","mtime":1655271854628},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js","mtime":1655271851823}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9Vc2Vycy9MZWUvRG9jdW1lbnRzL0dpdEh1Yi9pbmNyZW1lbnRhbC1oZWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZ2V0IGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldC5qcyI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQzovVXNlcnMvTGVlL0RvY3VtZW50cy9HaXRIdWIvaW5jcmVtZW50YWwtaGVsbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJDOi9Vc2Vycy9MZWUvRG9jdW1lbnRzL0dpdEh1Yi9pbmNyZW1lbnRhbC1oZWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gtZXMnOwppbXBvcnQgeyBJbnZlbnRvcnlTbG90IH0gZnJvbSAiQC9lbmdpbmUvZmVhdHVyZXMvaW52ZW50b3J5L0ludmVudG9yeVNsb3QiOwppbXBvcnQgeyBJdGVtSWQgfSBmcm9tICJAL2VuZ2luZS9mZWF0dXJlcy9pdGVtcy9JdGVtSWQiOwppbXBvcnQgeyBGZWF0dXJlIH0gZnJvbSAiQC9lbmdpbmUvZmVhdHVyZXMvRmVhdHVyZSI7CmltcG9ydCB7IEFic3RyYWN0Q29uc3VtYWJsZSB9IGZyb20gIkAvZW5naW5lL2ZlYXR1cmVzL2l0ZW1zL0NvbnN1bWFibGUiOwppbXBvcnQgeyBFbXB0eUl0ZW0gfSBmcm9tICJAL2VuZ2luZS9mZWF0dXJlcy9pdGVtcy9pbnN0YW5jZXMvRW1wdHlJdGVtIjsKaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSAic3Ryb25nbHktdHlwZWQtZXZlbnRzIjsKZXhwb3J0IHZhciBJbnZlbnRvcnkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9GZWF0dXJlKSB7CiAgX2luaGVyaXRzKEludmVudG9yeSwgX0ZlYXR1cmUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEludmVudG9yeSk7CgogIGZ1bmN0aW9uIEludmVudG9yeSgpIHsKICAgIHZhciBfdGhpczsKCiAgICB2YXIgc2xvdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDEwOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnZlbnRvcnkpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ2ludmVudG9yeScpOyAvLyBPdmVycmlkZGVuIGluIGluaXRpYWxpemU7CgogICAgX3RoaXMuX2l0ZW1MaXN0ID0gdW5kZWZpbmVkOwogICAgX3RoaXMuX29uSXRlbUdhaW4gPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7CiAgICBfdGhpcy5zbG90Q291bnQgPSBzbG90czsKICAgIF90aGlzLnNsb3RzID0gbmV3IEFycmF5KF90aGlzLnNsb3RDb3VudCkuZmlsbChuZXcgSW52ZW50b3J5U2xvdChuZXcgRW1wdHlJdGVtKCksIDApKTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhJbnZlbnRvcnksIFt7CiAgICBrZXk6ICJpbml0aWFsaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKGZlYXR1cmVzKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKEludmVudG9yeS5wcm90b3R5cGUpLCAiaW5pdGlhbGl6ZSIsIHRoaXMpLmNhbGwodGhpcywgZmVhdHVyZXMpOwoKICAgICAgdGhpcy5faXRlbUxpc3QgPSBmZWF0dXJlcy5pdGVtTGlzdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbnRlcmFjdEluZGljZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludGVyYWN0SW5kaWNlcyhpbmRleEZyb20sIGluZGV4VG8pIHsKICAgICAgaWYgKGluZGV4RnJvbSA9PT0gaW5kZXhUbykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGl0ZW1Gcm9tID0gdGhpcy5zbG90c1tpbmRleEZyb21dOwoKICAgICAgaWYgKGl0ZW1Gcm9tLmlzRW1wdHkoKSkgewogICAgICAgIGNvbnNvbGUud2FybigiQ2Fubm90IGludGVyYWN0IHdpdGggZW1wdHkgaXRlbSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGl0ZW1UbyA9IHRoaXMuc2xvdHNbaW5kZXhUb107CgogICAgICBpZiAoaXRlbUZyb20uaXRlbS5pZCA9PT0gaXRlbVRvLml0ZW0uaWQpIHsKICAgICAgICB0aGlzLm1lcmdlSXRlbXMoaXRlbUZyb20sIGl0ZW1Ubyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnN3YXBJdGVtcyhpbmRleEZyb20sIGluZGV4VG8pOwogICAgICByZXR1cm47CiAgICB9CiAgfSwgewogICAga2V5OiAibWVyZ2VJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VJdGVtcyhpdGVtRnJvbSwgaXRlbVRvKSB7CiAgICAgIGlmIChpdGVtRnJvbS5pdGVtLmlkICE9PSBpdGVtVG8uaXRlbS5pZCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IG1lcmdlIGl0ZW1zIG9mIHR5cGVzICIuY29uY2F0KGl0ZW1Gcm9tLml0ZW0uaWQsICIgYW5kICIpLmNvbmNhdChpdGVtVG8uaXRlbS5pZCkpOwogICAgICB9CgogICAgICB2YXIgYW1vdW50ID0gTWF0aC5taW4oaXRlbUZyb20uYW1vdW50LCBpdGVtVG8uc3BhY2VMZWZ0KCkpOwogICAgICBpdGVtRnJvbS5sb3NlSXRlbXMoYW1vdW50KTsKICAgICAgaXRlbVRvLmdhaW5JdGVtcyhhbW91bnQpOwogICAgfQogIH0sIHsKICAgIGtleTogInN3YXBJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3dhcEl0ZW1zKGluZGV4RnJvbSwgaW5kZXhUbykgewogICAgICB2YXIgdGVtcCA9IHRoaXMuc2xvdHNbaW5kZXhGcm9tXTsKICAgICAgdGhpcy5zbG90cy5zcGxpY2UoaW5kZXhGcm9tLCAxLCB0aGlzLnNsb3RzW2luZGV4VG9dKTsKICAgICAgdGhpcy5zbG90cy5zcGxpY2UoaW5kZXhUbywgMSwgdGVtcCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uc3VtZUl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnN1bWVJdGVtKGluZGV4KSB7CiAgICAgIHZhciBhbW91bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7CiAgICAgIHZhciBpbnZlbnRvcnlJdGVtID0gdGhpcy5zbG90c1tpbmRleF07CiAgICAgIHZhciBpdGVtID0gaW52ZW50b3J5SXRlbS5pdGVtOwoKICAgICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIEFic3RyYWN0Q29uc3VtYWJsZSkpIHsKICAgICAgICBjb25zb2xlLndhcm4oIkl0ZW0gIi5jb25jYXQoaXRlbSwgIiBpcyBub3QgYSBjb25zdW1hYmxlIikpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKGludmVudG9yeUl0ZW0uYW1vdW50IDwgYW1vdW50KSB7CiAgICAgICAgY29uc29sZS53YXJuKCJBbW91bnQgb2YgIi5jb25jYXQoaW52ZW50b3J5SXRlbSwgIiBpcyBub3QgZ3JlYXRlciB0aGFuICIpLmNvbmNhdChhbW91bnQpKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghaXRlbS5jYW5Db25zdW1lKCkpIHsKICAgICAgICBjb25zb2xlLndhcm4oIkNhbm5vdCBjb25zdW1lIGl0ZW0sIGNoZWNrIGl0cyByZXN0cmljdGlvbnMgZm9yIHRoZSByZWFzb24iKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmIChhbW91bnQgPT09IDEpIHsKICAgICAgICBpdGVtLmNvbnN1bWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtLmNvbnN1bWVNdWx0aXBsZShhbW91bnQpOwogICAgICB9CgogICAgICB0aGlzLmxvc2VJdGVtQXRJbmRleChpbmRleCwgYW1vdW50KTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioNCiAgICAgKiBSZW1vdmUgaXRlbXMgZnJvbSB0aGlzIGludmVudG9yeSwgcHJlZmVyIGFuIGVtcHR5IHN0YWNrDQogICAgICogUmVjdXJzaXZlbHkgY2FsbHMgaXRzZWxmIGlmIHN0YWNrcyBhcmUgZW1wdHlpbmcNCiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgdGhhdCBzdGlsbCBuZWVkIHRvIGJlIHJlbW92ZWQNCiAgICAgKiBAcGFyYW0gaWQNCiAgICAgKiBAcGFyYW0gYW1vdW50DQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvc2VJdGVtQW1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb3NlSXRlbUFtb3VudChpZCkgewogICAgICB2YXIgYW1vdW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwoKICAgICAgLy8gV2hpbGUgd2Ugc3RpbGwgbmVlZCB0byByZW1vdmUgYW5kIGhhdmUgaXRlbXMgbGVmdAogICAgICB3aGlsZSAoYW1vdW50ID4gMCAmJiB0aGlzLmdldFRvdGFsQW1vdW50KGlkKSA+IDApIHsKICAgICAgICB2YXIgbm9uRnVsbFN0YWNrSW5kZXggPSB0aGlzLmdldEluZGV4T2ZOb25GdWxsU3RhY2soaWQpOwogICAgICAgIHZhciBpbmRleFRvVXNlID0gbm9uRnVsbFN0YWNrSW5kZXggIT09IC0xID8gbm9uRnVsbFN0YWNrSW5kZXggOiB0aGlzLmdldEluZGV4T2ZJdGVtKGlkKTsKCiAgICAgICAgaWYgKGluZGV4VG9Vc2UgPT09IC0xKSB7CiAgICAgICAgICB0aHJvdyBFcnJvcigiSW5kZXggb2YgaXRlbSAiLmNvbmNhdChpZCwgIiB0byBsb3NlIGlzIC0xLiBUaGlzIHN1Z2dlc3RzIGFuIGVycm9yIGluIGludmVudG9yeSBtYW5hZ2VtZW50IikpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGFtb3VudFRvUmVtb3ZlID0gTWF0aC5taW4oYW1vdW50LCB0aGlzLnNsb3RzW2luZGV4VG9Vc2VdLmFtb3VudCk7CiAgICAgICAgYW1vdW50IC09IGFtb3VudFRvUmVtb3ZlOwogICAgICAgIHRoaXMubG9zZUl0ZW1BdEluZGV4KGluZGV4VG9Vc2UsIGFtb3VudFRvUmVtb3ZlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnYWluSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2Fpbkl0ZW0oaXRlbSkgewogICAgICB2YXIgYW1vdW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwoKICAgICAgdmFyIGFtb3VudExlZnQgPSB0aGlzLl9nYWluSXRlbShpdGVtLCBhbW91bnQpOwoKICAgICAgdGhpcy5fb25JdGVtR2Fpbi5kaXNwYXRjaChpdGVtLCBhbW91bnQpOwoKICAgICAgcmV0dXJuIGFtb3VudExlZnQ7CiAgICB9CiAgICAvKioNCiAgICAgKiBBZGQgaXRlbXMgdG8gdGhpcyBpbnZlbnRvcnksIHByZWZlciBhbiBleGlzdGluZyBzdGFjaw0KICAgICAqIFJlY3Vyc2l2ZWx5IGNhbGxzIGl0c2VsZiBpZiBzdGFja3MgYXJlIG92ZXJmbG93aW5nDQogICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGl0ZW1zIHRoYXQgbmVlZCB0byBiZSBhZGRlZA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfZ2Fpbkl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nYWluSXRlbShpdGVtKSB7CiAgICAgIHZhciBhbW91bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7CiAgICAgIC8vIEZpbmQgc3RhY2sgYW5kIGFkZCB0byBpdCBvciBjcmVhdGUgYSBuZXcgb25lCiAgICAgIHZhciBub25GdWxsU3RhY2tJbmRleCA9IHRoaXMuZ2V0SW5kZXhPZk5vbkZ1bGxTdGFjayhpdGVtLmlkKTsKCiAgICAgIGlmIChub25GdWxsU3RhY2tJbmRleCA9PT0gLTEpIHsKICAgICAgICAvLyBDcmVhdGUgYSBuZXcgc3RhY2sKICAgICAgICB2YXIgZW1wdHlJbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkZpcnN0RW1wdHlTbG90KCk7CgogICAgICAgIGlmIChlbXB0eUluZGV4ID09PSAtMSkgewogICAgICAgICAgY29uc29sZS5sb2coIkNhbm5vdCBhZGQgIi5jb25jYXQoYW1vdW50LCAiIG9mICIpLmNvbmNhdChpdGVtLmlkLCAiLCBubyBlbXB0eSBzbG90cyBsZWZ0IikpOwogICAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgICAgICB9CgogICAgICAgIHZhciBhbW91bnRUb0FkZCA9IE1hdGgubWluKGFtb3VudCwgaXRlbS5tYXhTdGFjayk7CiAgICAgICAgdGhpcy5zbG90cy5zcGxpY2UoZW1wdHlJbmRleCwgMSwgbmV3IEludmVudG9yeVNsb3QoaXRlbSwgYW1vdW50VG9BZGQpKTsKICAgICAgICB2YXIgYW1vdW50TGVmdCA9IGFtb3VudCAtIGFtb3VudFRvQWRkOwoKICAgICAgICBpZiAoYW1vdW50TGVmdCA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLl9nYWluSXRlbShpdGVtLCBhbW91bnRMZWZ0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBBZGQgdG8gZXhpc3Rpbmcgc3RhY2sKICAgICAgICB2YXIgX2Ftb3VudFRvQWRkID0gTWF0aC5taW4oYW1vdW50LCB0aGlzLnNsb3RzW25vbkZ1bGxTdGFja0luZGV4XS5zcGFjZUxlZnQoKSk7CgogICAgICAgIHRoaXMuc2xvdHNbbm9uRnVsbFN0YWNrSW5kZXhdLmdhaW5JdGVtcyhfYW1vdW50VG9BZGQpOwoKICAgICAgICB2YXIgX2Ftb3VudExlZnQgPSBhbW91bnQgLSBfYW1vdW50VG9BZGQ7CgogICAgICAgIGlmIChfYW1vdW50TGVmdCA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLl9nYWluSXRlbShpdGVtLCBfYW1vdW50TGVmdCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTcG90c0xlZnRGb3JJdGVtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTcG90c0xlZnRGb3JJdGVtKGl0ZW0pIHsKICAgICAgdmFyIHRvdGFsID0gMDsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnNsb3RzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGludmVudG9yeUl0ZW0gPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBpZiAoaW52ZW50b3J5SXRlbS5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgdG90YWwgKz0gaXRlbS5tYXhTdGFjazsKICAgICAgICAgIH0gZWxzZSBpZiAoaW52ZW50b3J5SXRlbS5pdGVtLmlkID09PSBpdGVtLmlkKSB7CiAgICAgICAgICAgIHRvdGFsICs9IGludmVudG9yeUl0ZW0uc3BhY2VMZWZ0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0b3RhbDsKICAgIH0KICAgIC8qKg0KICAgICAqIFRoaXMgbWV0aG9kIHZlcnkgaW5lZmZpY2llbnRseSBjbG9uZXMgdGhlIGludmVudG9yeSwgYW5kIHNpbXVsYXRlcyBhZGRpbmcgdGhlIGl0ZW1zIHNlZSBpZiB0aGV5IGNhbiBiZSB0YWtlbi4NCiAgICAgKiBJdCdzIGFsc28gdGhlIG9ubHkgcmVhc29uIHdlJ3JlIHVzaW5nIGxvZGFzaC4uLg0KICAgICAqIFRPRE8gZG8gdGhpcyBpbiBhIHNtYXJ0IHdheS4NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY2FuVGFrZUl0ZW1BbW91bnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5UYWtlSXRlbUFtb3VudHMoaXRlbUFtb3VudHMpIHsKICAgICAgdmFyIGNsb25lZEludmVudG9yeSA9IGNsb25lRGVlcCh0aGlzKTsKCiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaXRlbUFtb3VudHMpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICB2YXIgYW1vdW50TGVmdCA9IGNsb25lZEludmVudG9yeS5nYWluSXRlbSh0aGlzLl9pdGVtTGlzdFtpdGVtLmlkXSwgaXRlbS5hbW91bnQpOwoKICAgICAgICAgIGlmIChhbW91bnRMZWZ0ICE9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNJdGVtQW1vdW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzSXRlbUFtb3VudHMoYW1vdW50cykgewogICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFtb3VudHMpLAogICAgICAgICAgX3N0ZXAzOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGFtb3VudCA9IF9zdGVwMy52YWx1ZTsKCiAgICAgICAgICBpZiAoIXRoaXMuaGFzSXRlbUFtb3VudChhbW91bnQpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNJdGVtQW1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNJdGVtQW1vdW50KGFtb3VudCkgewogICAgICByZXR1cm4gdGhpcy5nZXRUb3RhbEFtb3VudChhbW91bnQuaWQpID49IGFtb3VudC5hbW91bnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuVGFrZUl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhblRha2VJdGVtKGl0ZW0sIGFtb3VudCkgewogICAgICByZXR1cm4gdGhpcy5nZXRTcG90c0xlZnRGb3JJdGVtKGl0ZW0pID49IGFtb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJbmRleE9mTm9uRnVsbFN0YWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleE9mTm9uRnVsbFN0YWNrKGlkKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbG90cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnNsb3RzW2ldLml0ZW0uaWQgPT09IGlkICYmICF0aGlzLnNsb3RzW2ldLmlzRnVsbCgpKSB7CiAgICAgICAgICByZXR1cm4gaTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAtMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJbmRleE9mSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhPZkl0ZW0oaWQpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNsb3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuc2xvdHNbaV0uaXRlbS5pZCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIC0xOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEluZGV4T2ZGaXJzdEVtcHR5U2xvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhPZkZpcnN0RW1wdHlTbG90KCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2xvdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5zbG90c1tpXS5pc0VtcHR5KCkpIHsKICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIC0xOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc0VtcHR5U2xvdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzRW1wdHlTbG90KCkgewogICAgICByZXR1cm4gdGhpcy5nZXRJbmRleE9mRmlyc3RFbXB0eVNsb3QoKSAhPT0gLTE7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzTm9uRnVsbFN0YWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNOb25GdWxsU3RhY2soaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5kZXhPZk5vbkZ1bGxTdGFjayhpZCkgIT09IC0xOwogICAgfQogIH0sIHsKICAgIGtleTogImxvc2VJdGVtQXRJbmRleCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9zZUl0ZW1BdEluZGV4KGluZGV4KSB7CiAgICAgIHZhciBhbW91bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7CiAgICAgIHRoaXMuc2xvdHNbaW5kZXhdLmxvc2VJdGVtcyhhbW91bnQpOwoKICAgICAgaWYgKHRoaXMuc2xvdHNbaW5kZXhdLmFtb3VudCA8PSAwKSB7CiAgICAgICAgdGhpcy5zbG90cy5zcGxpY2UoaW5kZXgsIDEsIG5ldyBJbnZlbnRvcnlTbG90KG5ldyBFbXB0eUl0ZW0oKSwgMCkpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJvcFN0YWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcm9wU3RhY2soaW5kZXgpIHsKICAgICAgdGhpcy5sb3NlSXRlbUF0SW5kZXgoaW5kZXgsIHRoaXMuc2xvdHNbaW5kZXhdLmFtb3VudCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RW1wdHlTbG90Q291bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVtcHR5U2xvdENvdW50KCkgewogICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnNsb3RzKSwKICAgICAgICAgIF9zdGVwNDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpbnZlbnRvcnlJdGVtID0gX3N0ZXA0LnZhbHVlOwoKICAgICAgICAgIGlmIChpbnZlbnRvcnlJdGVtLmlzRW1wdHkoKSkgewogICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUb3RhbEFtb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG90YWxBbW91bnQoaWQpIHsKICAgICAgdmFyIHRvdGFsID0gMDsKCiAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5zbG90cyksCiAgICAgICAgICBfc3RlcDU7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaW52ZW50b3J5SXRlbSA9IF9zdGVwNS52YWx1ZTsKCiAgICAgICAgICBpZiAoaW52ZW50b3J5SXRlbS5pdGVtLmlkID09PSBpZCkgewogICAgICAgICAgICB0b3RhbCArPSBpbnZlbnRvcnlJdGVtLmFtb3VudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICB9CgogICAgICByZXR1cm4gdG90YWw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QW1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBbW91bnQoaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2xvdHNbaW5kZXhdLmFtb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0VtcHR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5KCkgewogICAgICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuc2xvdHMpLAogICAgICAgICAgX3N0ZXA2OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjYucygpOyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDYudmFsdWU7CgogICAgICAgICAgaWYgKGl0ZW0uYW1vdW50ICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqDQogICAgICogRW1pdHRlZCB3aGVuZXZlciB0aGlzIGludmVudG9yeSBnYWlucyBpdGVtcyAoZXZlbiBpZiBpdCBjYW4ndCB0YWtlIHRoZW0pLg0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvbkl0ZW1HYWluIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb25JdGVtR2Fpbi5hc0V2ZW50KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZChkYXRhKSB7CiAgICAgIGlmICghZGF0YS5zbG90cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnNsb3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHNsb3REYXRhID0gZGF0YS5zbG90c1tpXTsKCiAgICAgICAgaWYgKHNsb3REYXRhLmlkID09PSBJdGVtSWQuRW1wdHkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5faXRlbUxpc3Rbc2xvdERhdGEuaWRdOwogICAgICAgICAgaXRlbS5sb2FkKHNsb3REYXRhLmRhdGEpOwogICAgICAgICAgdGhpcy5zbG90c1tpXSA9IG5ldyBJbnZlbnRvcnlTbG90KGl0ZW0sIHNsb3REYXRhLmFtb3VudCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5lcnJvcigiQ291bGQgbm90IGxvYWQgSXRlbSAiLmNvbmNhdChzbG90RGF0YS5pZCwgIi4gTWFrZSBzdXJlIGl0IGhhcyBhIGdldHRlciBpbiBJdGVtTGlzdCIpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgc2xvdHMgPSB0aGlzLnNsb3RzLm1hcChmdW5jdGlvbiAoc2xvdCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogc2xvdC5pdGVtLmlkLAogICAgICAgICAgYW1vdW50OiBzbG90LmFtb3VudCwKICAgICAgICAgIGRhdGE6IHNsb3QuaXRlbS5zYXZlKCkKICAgICAgICB9OwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzbG90czogc2xvdHMKICAgICAgfTsKICAgIH0KICB9XSk7CgogIHJldHVybiBJbnZlbnRvcnk7Cn0oRmVhdHVyZSk7"},{"version":3,"sources":["C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\features\\inventory\\Inventory.ts"],"names":[],"mappings":"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","sourcesContent":["import {cloneDeep} from 'lodash-es';\r\n\r\nimport {InventorySlot} from \"@/engine/features/inventory/InventorySlot\";\r\nimport {ItemId} from \"@/engine/features/items/ItemId\";\r\nimport {Feature} from \"@/engine/features/Feature\";\r\nimport {ItemList} from \"@/engine/features/items/ItemList\";\r\nimport {Features} from \"@/engine/Features\";\r\nimport {AbstractConsumable} from \"@/engine/features/items/Consumable\";\r\nimport {AbstractItem} from \"@/engine/features/items/AbstractItem\";\r\nimport {EmptyItem} from \"@/engine/features/items/instances/EmptyItem\";\r\nimport {InventorySaveData} from \"@/engine/features/inventory/InventorySaveData\";\r\nimport {InventorySlotSaveData} from \"@/engine/features/inventory/InventorySlotSaveData\";\r\nimport {EventDispatcher} from \"strongly-typed-events\";\r\nimport {ItemAmount} from \"@/engine/features/items/ItemAmount\";\r\n\r\nexport class Inventory extends Feature {\r\n    slotCount: number;\r\n    slots: InventorySlot[];\r\n\r\n    // Overridden in initialize;\r\n    _itemList: ItemList = undefined as unknown as ItemList;\r\n\r\n    private _onItemGain = new EventDispatcher<AbstractItem, number>();\r\n\r\n\r\n    constructor(slots: number = 10) {\r\n        super('inventory');\r\n        this.slotCount = slots;\r\n        this.slots = new Array(this.slotCount).fill(new InventorySlot(new EmptyItem(), 0));\r\n    }\r\n\r\n\r\n    initialize(features: Features) {\r\n        super.initialize(features);\r\n        this._itemList = features.itemList;\r\n    }\r\n\r\n    interactIndices(indexFrom: number, indexTo: number) {\r\n        if (indexFrom === indexTo) {\r\n            return;\r\n        }\r\n\r\n        const itemFrom = this.slots[indexFrom];\r\n\r\n        if (itemFrom.isEmpty()) {\r\n            console.warn(\"Cannot interact with empty item\");\r\n            return;\r\n        }\r\n        const itemTo = this.slots[indexTo];\r\n\r\n        if (itemFrom.item.id === itemTo.item.id) {\r\n            this.mergeItems(itemFrom, itemTo);\r\n            return;\r\n        }\r\n\r\n        this.swapItems(indexFrom, indexTo);\r\n        return;\r\n    }\r\n\r\n    mergeItems(itemFrom: InventorySlot, itemTo: InventorySlot) {\r\n\r\n        if (itemFrom.item.id !== itemTo.item.id) {\r\n            throw new Error(`Cannot merge items of types ${itemFrom.item.id} and ${itemTo.item.id}`);\r\n        }\r\n\r\n        const amount = Math.min(itemFrom.amount, itemTo.spaceLeft());\r\n        itemFrom.loseItems(amount);\r\n        itemTo.gainItems(amount);\r\n    }\r\n\r\n    swapItems(indexFrom: number, indexTo: number) {\r\n        const temp = this.slots[indexFrom];\r\n        this.slots.splice(indexFrom, 1, this.slots[indexTo]);\r\n        this.slots.splice(indexTo, 1, temp);\r\n\r\n    }\r\n\r\n    consumeItem(index: number, amount: number = 1): boolean {\r\n        const inventoryItem = this.slots[index];\r\n        const item = inventoryItem.item;\r\n\r\n\r\n        if (!(item instanceof AbstractConsumable)) {\r\n            console.warn(`Item ${item} is not a consumable`);\r\n            return false;\r\n        }\r\n        if (inventoryItem.amount < amount) {\r\n            console.warn(`Amount of ${inventoryItem} is not greater than ${amount}`);\r\n            return false;\r\n        }\r\n        if (!item.canConsume()) {\r\n            console.warn(\"Cannot consume item, check its restrictions for the reason\");\r\n            return false;\r\n        }\r\n\r\n        if (amount === 1) {\r\n            item.consume();\r\n        } else {\r\n            item.consumeMultiple(amount);\r\n        }\r\n        this.loseItemAtIndex(index, amount);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Remove items from this inventory, prefer an empty stack\r\n     * Recursively calls itself if stacks are emptying\r\n     * Returns the number of items that still need to be removed\r\n     * @param id\r\n     * @param amount\r\n     */\r\n    loseItemAmount(id: ItemId, amount: number = 1): number {\r\n        // While we still need to remove and have items left\r\n        while (amount > 0 && this.getTotalAmount(id) > 0) {\r\n            const nonFullStackIndex = this.getIndexOfNonFullStack(id)\r\n            const indexToUse = nonFullStackIndex !== -1 ? nonFullStackIndex : this.getIndexOfItem(id);\r\n            if (indexToUse === -1) {\r\n                throw Error(`Index of item ${id} to lose is -1. This suggests an error in inventory management`);\r\n            }\r\n            const amountToRemove = Math.min(amount, this.slots[indexToUse].amount);\r\n            amount -= amountToRemove;\r\n            this.loseItemAtIndex(indexToUse, amountToRemove);\r\n\r\n        }\r\n\r\n        return amount;\r\n    }\r\n\r\n    public gainItem(item: AbstractItem, amount: number = 1): number {\r\n        const amountLeft = this._gainItem(item, amount);\r\n        this._onItemGain.dispatch(item, amount);\r\n        return amountLeft;\r\n    }\r\n\r\n    /**\r\n     * Add items to this inventory, prefer an existing stack\r\n     * Recursively calls itself if stacks are overflowing\r\n     * Returns the number of items that need to be added\r\n     */\r\n    private _gainItem(item: AbstractItem, amount: number = 1): number {\r\n\r\n        // Find stack and add to it or create a new one\r\n        const nonFullStackIndex = this.getIndexOfNonFullStack(item.id);\r\n        if (nonFullStackIndex === -1) {\r\n            // Create a new stack\r\n            const emptyIndex = this.getIndexOfFirstEmptySlot();\r\n            if (emptyIndex === -1) {\r\n                console.log(`Cannot add ${amount} of ${item.id}, no empty slots left`);\r\n                return amount;\r\n            }\r\n            const amountToAdd = Math.min(amount, item.maxStack);\r\n            this.slots.splice(emptyIndex, 1, new InventorySlot(item, amountToAdd));\r\n\r\n            const amountLeft = amount - amountToAdd;\r\n            if (amountLeft <= 0) {\r\n                return 0;\r\n            }\r\n            return this._gainItem(item, amountLeft);\r\n        } else {\r\n            // Add to existing stack\r\n            const amountToAdd = Math.min(amount, this.slots[nonFullStackIndex].spaceLeft());\r\n\r\n            this.slots[nonFullStackIndex].gainItems(amountToAdd);\r\n            const amountLeft = amount - amountToAdd;\r\n            if (amountLeft <= 0) {\r\n                return 0;\r\n            }\r\n            return this._gainItem(item, amountLeft);\r\n        }\r\n    }\r\n\r\n    getSpotsLeftForItem(item: AbstractItem) {\r\n        let total = 0;\r\n        for (const inventoryItem of this.slots) {\r\n            if (inventoryItem.isEmpty()) {\r\n                total += item.maxStack;\r\n            } else if (inventoryItem.item.id === item.id) {\r\n                total += inventoryItem.spaceLeft();\r\n            }\r\n        }\r\n        return total;\r\n    }\r\n\r\n    /**\r\n     * This method very inefficiently clones the inventory, and simulates adding the items see if they can be taken.\r\n     * It's also the only reason we're using lodash...\r\n     * TODO do this in a smart way.\r\n     */\r\n    canTakeItemAmounts(itemAmounts: ItemAmount[]) {\r\n        const clonedInventory = cloneDeep(this);\r\n        for (const item of itemAmounts) {\r\n            const amountLeft = clonedInventory.gainItem(this._itemList[item.id], item.amount);\r\n            if (amountLeft !== 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    hasItemAmounts(amounts: ItemAmount[]) {\r\n        for (const amount of amounts) {\r\n            if (!this.hasItemAmount(amount)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    hasItemAmount(amount: ItemAmount) {\r\n        return this.getTotalAmount(amount.id) >= amount.amount;\r\n    }\r\n\r\n    canTakeItem(item: AbstractItem, amount: number) {\r\n        return this.getSpotsLeftForItem(item) >= amount;\r\n    }\r\n\r\n    getIndexOfNonFullStack(id: ItemId) {\r\n        for (let i = 0; i < this.slots.length; i++) {\r\n            if (this.slots[i].item.id === id && !this.slots[i].isFull()) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    getIndexOfItem(id: ItemId) {\r\n        for (let i = 0; i < this.slots.length; i++) {\r\n            if (this.slots[i].item.id === id) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    getIndexOfFirstEmptySlot(): number {\r\n        for (let i = 0; i < this.slots.length; i++) {\r\n            if (this.slots[i].isEmpty()) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    hasEmptySlot(): boolean {\r\n        return this.getIndexOfFirstEmptySlot() !== -1;\r\n    }\r\n\r\n    hasNonFullStack(id: ItemId): boolean {\r\n        return this.getIndexOfNonFullStack(id) !== -1;\r\n    }\r\n\r\n\r\n    loseItemAtIndex(index: number, amount: number = 1) {\r\n        this.slots[index].loseItems(amount);\r\n        if (this.slots[index].amount <= 0) {\r\n            this.slots.splice(index, 1, new InventorySlot(new EmptyItem(), 0));\r\n        }\r\n    }\r\n\r\n    dropStack(index: number) {\r\n        this.loseItemAtIndex(index, this.slots[index].amount);\r\n    }\r\n\r\n    getEmptySlotCount(): number {\r\n        let count = 0;\r\n        for (const inventoryItem of this.slots) {\r\n            if (inventoryItem.isEmpty()) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n\r\n    getTotalAmount(id: ItemId): number {\r\n        let total = 0;\r\n        for (const inventoryItem of this.slots) {\r\n            if (inventoryItem.item.id === id) {\r\n                total += inventoryItem.amount;\r\n            }\r\n        }\r\n        return total;\r\n    }\r\n\r\n    getAmount(index: number): number {\r\n        return this.slots[index].amount;\r\n    }\r\n\r\n\r\n    isEmpty(): boolean {\r\n        for (const item of this.slots) {\r\n            if (item.amount != 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Emitted whenever this inventory gains items (even if it can't take them).\r\n     */\r\n    public get onItemGain() {\r\n        return this._onItemGain.asEvent();\r\n    }\r\n\r\n    load(data: InventorySaveData): void {\r\n        if (!data.slots) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < data.slots.length; i++) {\r\n            const slotData: InventorySlotSaveData = data.slots[i];\r\n            if (slotData.id === ItemId.Empty) {\r\n                continue;\r\n            }\r\n\r\n            try {\r\n                const item = this._itemList[slotData.id];\r\n                item.load(slotData.data);\r\n                this.slots[i] = new InventorySlot(item, slotData.amount);\r\n            } catch (e) {\r\n                console.error(`Could not load Item ${slotData.id}. Make sure it has a getter in ItemList`);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    save(): InventorySaveData {\r\n        const slots = this.slots.map(slot => {\r\n            return {\r\n                id: slot.item.id,\r\n                amount: slot.amount,\r\n                data: slot.item.save()\r\n            };\r\n        });\r\n        return {\r\n            slots: slots\r\n        }\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}]}