{"remainingRequest":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js??ref--15-2!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\features\\statistics\\Statistics.ts","dependencies":[{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\features\\statistics\\Statistics.ts","mtime":1655183156787},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655271851080},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\babel-loader\\lib\\index.js","mtime":1655271854201},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\ts-loader\\index.js","mtime":1655271854628},{"path":"C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js","mtime":1655271851823}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9MZWUvRG9jdW1lbnRzL0dpdEh1Yi9pbmNyZW1lbnRhbC1oZWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvTGVlL0RvY3VtZW50cy9HaXRIdWIvaW5jcmVtZW50YWwtaGVsbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkM6L1VzZXJzL0xlZS9Eb2N1bWVudHMvR2l0SHViL2luY3JlbWVudGFsLWhlbGwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJDOi9Vc2Vycy9MZWUvRG9jdW1lbnRzL0dpdEh1Yi9pbmNyZW1lbnRhbC1oZWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CgovKioNCiAqIFN0YXRpc3RpY3MgY2xhc3MgdG8ga2VlcCB0cmFjayBvZiBpbmNyZWFzaW5nIG51bWJlcnMNCiAqLwppbXBvcnQgeyBTdGF0aXN0aWNJZCB9IGZyb20gIkAvZW5naW5lL2ZlYXR1cmVzL3N0YXRpc3RpY3MvU3RhdGlzdGljSWQiOwppbXBvcnQgeyBOdW1iZXJTdGF0aXN0aWMgfSBmcm9tICJAL2VuZ2luZS9mZWF0dXJlcy9zdGF0aXN0aWNzL051bWJlclN0YXRpc3RpYyI7CmltcG9ydCB7IEZlYXR1cmUgfSBmcm9tICJAL2VuZ2luZS9mZWF0dXJlcy9GZWF0dXJlIjsKaW1wb3J0IHsgU3RhdGlzdGljc1NhdmVEYXRhIH0gZnJvbSAiQC9lbmdpbmUvZmVhdHVyZXMvc3RhdGlzdGljcy9TdGF0aXN0aWNzU2F2ZURhdGEiOwppbXBvcnQgeyBDdXJyZW5jeVR5cGUgfSBmcm9tICJAL2VuZ2luZS9mZWF0dXJlcy93YWxsZXQvQ3VycmVuY3lUeXBlIjsKaW1wb3J0IHsgQXJyYXlTdGF0aXN0aWMgfSBmcm9tICJAL2VuZ2luZS9mZWF0dXJlcy9zdGF0aXN0aWNzL0FycmF5U3RhdGlzdGljIjsKZXhwb3J0IHZhciBTdGF0aXN0aWNzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRmVhdHVyZSkgewogIF9pbmhlcml0cyhTdGF0aXN0aWNzLCBfRmVhdHVyZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU3RhdGlzdGljcyk7CgogIGZ1bmN0aW9uIFN0YXRpc3RpY3MoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXRpc3RpY3MpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ3N0YXRpc3RpY3MnKTsKICAgIF90aGlzLmxpc3QgPSB7fTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhTdGF0aXN0aWNzLCBbewogICAga2V5OiAiaW5pdGlhbGl6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShmZWF0dXJlcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucmVnaXN0ZXJTdGF0aXN0aWMobmV3IE51bWJlclN0YXRpc3RpYyhTdGF0aXN0aWNJZC5Ub3RhbE1vbmV5R2FpbmVkLCAnVG90YWwgbW9uZXknKSk7CiAgICAgIHRoaXMucmVnaXN0ZXJTdGF0aXN0aWMobmV3IE51bWJlclN0YXRpc3RpYyhTdGF0aXN0aWNJZC5Ub3RhbFNjcmFwR2FpbmVkLCAnVG90YWwgc2NyYXAnKSk7CiAgICAgIHRoaXMucmVnaXN0ZXJTdGF0aXN0aWMobmV3IE51bWJlclN0YXRpc3RpYyhTdGF0aXN0aWNJZC5Ub3RhbFNjcmFwR2FpbmVkVGhpc1ByZXN0aWdlLCAnVG90YWwgc2NyYXAgdGhpcyBwcmVzdGlnZScpKTsKICAgICAgZmVhdHVyZXMud2FsbGV0Lm9uQ3VycmVuY3lHYWluLnN1YnNjcmliZShmdW5jdGlvbiAoY3VycmVuY3kpIHsKICAgICAgICBpZiAoY3VycmVuY3kudHlwZSA9PT0gQ3VycmVuY3lUeXBlLk1vbmV5KSB7CiAgICAgICAgICBfdGhpczIuaW5jcmVtZW50TnVtYmVyU3RhdGlzdGljKFN0YXRpc3RpY0lkLlRvdGFsTW9uZXlHYWluZWQsIGN1cnJlbmN5LmFtb3VudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3VycmVuY3kudHlwZSA9PT0gQ3VycmVuY3lUeXBlLlNjcmFwKSB7CiAgICAgICAgICBfdGhpczIuaW5jcmVtZW50TnVtYmVyU3RhdGlzdGljKFN0YXRpc3RpY0lkLlRvdGFsU2NyYXBHYWluZWQsIGN1cnJlbmN5LmFtb3VudCk7CgogICAgICAgICAgX3RoaXMyLmluY3JlbWVudE51bWJlclN0YXRpc3RpYyhTdGF0aXN0aWNJZC5Ub3RhbFNjcmFwR2FpbmVkVGhpc1ByZXN0aWdlLCBjdXJyZW5jeS5hbW91bnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q3VycmVuY3lTdGF0aXN0aWNUaGlzUHJlc3RpZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbmN5U3RhdGlzdGljVGhpc1ByZXN0aWdlKHR5cGUpIHsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSBDdXJyZW5jeVR5cGUuU2NyYXA6CiAgICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0YXRpc3RpYyhTdGF0aXN0aWNJZC5Ub3RhbFNjcmFwR2FpbmVkVGhpc1ByZXN0aWdlKTsKICAgICAgICAgIH0KCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RhdGlzdGljKFN0YXRpc3RpY0lkLlRvdGFsU2NyYXBHYWluZWRUaGlzUHJlc3RpZ2UpOwogICAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5jcmVtZW50TnVtYmVyU3RhdGlzdGljIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbmNyZW1lbnROdW1iZXJTdGF0aXN0aWMoaWQpIHsKICAgICAgdmFyIGFtb3VudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTsKCiAgICAgIGlmICghdGhpcy5oYXNTdGF0aXN0aWMoaWQpKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJDb3VsZCBub3QgZmluZCBzdGF0aXN0aWMgd2l0aCBpZCAiLmNvbmNhdChpZCkpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHN0YXRpc3RpYyA9IHRoaXMubGlzdFtpZF07CgogICAgICBpZiAoc3RhdGlzdGljIGluc3RhbmNlb2YgTnVtYmVyU3RhdGlzdGljKSB7CiAgICAgICAgc3RhdGlzdGljLnZhbHVlICs9IGFtb3VudDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImluY3JlbWVudEFycmF5U3RhdGlzdGljIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbmNyZW1lbnRBcnJheVN0YXRpc3RpYyhpZCwgaW5kZXgpIHsKICAgICAgdmFyIGFtb3VudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMTsKCiAgICAgIGlmICghdGhpcy5oYXNTdGF0aXN0aWMoaWQpKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJDb3VsZCBub3QgZmluZCBzdGF0aXN0aWMgd2l0aCBpZCAiLmNvbmNhdChpZCkpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHN0YXRpc3RpYyA9IHRoaXMubGlzdFtpZF07CgogICAgICBpZiAoc3RhdGlzdGljIGluc3RhbmNlb2YgQXJyYXlTdGF0aXN0aWMpIHsKICAgICAgICB2YXIgbmV3VmFsdWUgPSBzdGF0aXN0aWMudmFsdWVbaW5kZXhdICsgYW1vdW50OwogICAgICAgIHN0YXRpc3RpYy52YWx1ZS5zcGxpY2UoaW5kZXgsIDEsIG5ld1ZhbHVlKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldFN0YXRpc3RpYyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3RhdGlzdGljKGlkKSB7CiAgICAgIGlmICghdGhpcy5oYXNTdGF0aXN0aWMoaWQpKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJDb3VsZCBub3QgZmluZCBzdGF0aXN0aWMgd2l0aCBpZCAiLmNvbmNhdChpZCkpOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmxpc3RbaWRdOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzU3RhdGlzdGljIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNTdGF0aXN0aWMoaWQpIHsKICAgICAgcmV0dXJuIGlkIGluIHRoaXMubGlzdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWdpc3RlclN0YXRpc3RpYyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJTdGF0aXN0aWMoc3RhdGlzdGljKSB7CiAgICAgIHRoaXMubGlzdFtzdGF0aXN0aWMuaWRdID0gc3RhdGlzdGljOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoZGF0YSkgewogICAgICBmb3IgKHZhciBpZCBpbiBkYXRhLmxpc3QpIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEubGlzdCwgaWQpKSB7CiAgICAgICAgICBpZiAodGhpcy5oYXNTdGF0aXN0aWMoaWQpKSB7CiAgICAgICAgICAgIHRoaXMubGlzdFtpZF0udmFsdWUgPSBkYXRhLmxpc3RbaWRdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCJDb3VsZCBub3QgbG9hZCBzdGF0aXN0aWMgIi5jb25jYXQoaWQpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwYXJzZVNhdmVEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZVNhdmVEYXRhKGpzb24pIHsKICAgICAgdmFyIGRhdGEgPSBuZXcgU3RhdGlzdGljc1NhdmVEYXRhKCk7CiAgICAgIHZhciBsaXN0ID0ganNvbi5saXN0OwoKICAgICAgZm9yICh2YXIgaWQgaW4gbGlzdCkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobGlzdCwgaWQpKSB7CiAgICAgICAgICBkYXRhLmFkZFN0YXRpc3RpYyhpZCwgbGlzdFtpZF0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIGRhdGEgPSBuZXcgU3RhdGlzdGljc1NhdmVEYXRhKCk7CgogICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmxpc3QpIHsKICAgICAgICBkYXRhLmFkZFN0YXRpc3RpYyhpZCwgdGhpcy5saXN0W2lkXS52YWx1ZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN0YXRpc3RpY3M7Cn0oRmVhdHVyZSk7"},{"version":3,"sources":["C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Lee\\Documents\\GitHub\\incremental-hell\\src\\engine\\features\\statistics\\Statistics.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Statistics class to keep track of increasing numbers\r\n */\r\nimport {StatisticId} from \"@/engine/features/statistics/StatisticId\";\r\nimport {NumberStatistic} from \"@/engine/features/statistics/NumberStatistic\";\r\nimport {Feature} from \"@/engine/features/Feature\";\r\nimport {AbstractStatistic} from \"@/engine/features/statistics/AbstractStatistic\";\r\nimport {StatisticsSaveData} from \"@/engine/features/statistics/StatisticsSaveData\";\r\nimport {StatisticsValue} from \"@/engine/features/statistics/StatisticsValueType\";\r\nimport {Features} from \"@/engine/Features\";\r\nimport {Currency} from \"@/engine/features/wallet/Currency\";\r\nimport {CurrencyType} from \"@/engine/features/wallet/CurrencyType\";\r\nimport {ArrayStatistic} from \"@/engine/features/statistics/ArrayStatistic\";\r\n\r\nexport class Statistics extends Feature {\r\n\r\n    list: Record<StatisticId, AbstractStatistic>\r\n\r\n\r\n    constructor() {\r\n        super('statistics');\r\n        this.list = {} as Record<StatisticId, AbstractStatistic>;\r\n    }\r\n\r\n    initialize(features: Features): void {\r\n        this.registerStatistic(new NumberStatistic(StatisticId.TotalMoneyGained, 'Total money'))\r\n        this.registerStatistic(new NumberStatistic(StatisticId.TotalScrapGained, 'Total scrap'))\r\n        this.registerStatistic(new NumberStatistic(StatisticId.TotalScrapGainedThisPrestige, 'Total scrap this prestige'))\r\n\r\n        features.wallet.onCurrencyGain.subscribe((currency: Currency) => {\r\n            if (currency.type === CurrencyType.Money) {\r\n                this.incrementNumberStatistic(StatisticId.TotalMoneyGained, currency.amount);\r\n            }\r\n            if (currency.type === CurrencyType.Scrap) {\r\n                this.incrementNumberStatistic(StatisticId.TotalScrapGained, currency.amount)\r\n                this.incrementNumberStatistic(StatisticId.TotalScrapGainedThisPrestige, currency.amount)\r\n            }\r\n        });\r\n    }\r\n\r\n    getCurrencyStatisticThisPrestige(type: CurrencyType): NumberStatistic {\r\n        switch (type) {\r\n            case CurrencyType.Scrap: {\r\n                return this.getStatistic(StatisticId.TotalScrapGainedThisPrestige) as NumberStatistic;\r\n            }\r\n            default: {\r\n                return this.getStatistic(StatisticId.TotalScrapGainedThisPrestige) as NumberStatistic;\r\n            }\r\n        }\r\n    }\r\n\r\n    incrementNumberStatistic(id: StatisticId, amount = 1): void {\r\n        if (!this.hasStatistic(id)) {\r\n            console.warn(`Could not find statistic with id ${id}`)\r\n            return;\r\n        }\r\n        const statistic = this.list[id];\r\n        if (statistic instanceof NumberStatistic) {\r\n            statistic.value += amount;\r\n        }\r\n    }\r\n\r\n    incrementArrayStatistic(id: StatisticId, index: number, amount = 1): void {\r\n        if (!this.hasStatistic(id)) {\r\n            console.warn(`Could not find statistic with id ${id}`)\r\n            return;\r\n        }\r\n        const statistic = this.list[id];\r\n        if (statistic instanceof ArrayStatistic) {\r\n            const newValue = statistic.value[index] + amount;\r\n            statistic.value.splice(index, 1, newValue)\r\n        }\r\n    }\r\n\r\n    public getStatistic(id: StatisticId): AbstractStatistic | null {\r\n        if (!this.hasStatistic(id)) {\r\n            console.warn(`Could not find statistic with id ${id}`)\r\n            return null;\r\n        } else {\r\n            return this.list[id];\r\n        }\r\n    }\r\n\r\n    private hasStatistic(id: StatisticId): boolean {\r\n        return id in this.list\r\n    }\r\n\r\n    public registerStatistic(statistic: AbstractStatistic) {\r\n        this.list[statistic.id] = statistic;\r\n    }\r\n\r\n    load(data: StatisticsSaveData): void {\r\n        for (const id in data.list) {\r\n            if (Object.prototype.hasOwnProperty.call(data.list, id)) {\r\n                if (this.hasStatistic(id as StatisticId)) {\r\n                    this.list[id as StatisticId].value = data.list[id as StatisticId];\r\n                } else {\r\n                    console.warn(`Could not load statistic ${id}`)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    parseSaveData(json: Record<string, unknown>): StatisticsSaveData {\r\n        const data = new StatisticsSaveData();\r\n        const list = json.list as Record<string, StatisticsValue>;\r\n        for (const id in list) {\r\n            if (Object.prototype.hasOwnProperty.call(list, id)) {\r\n                data.addStatistic(id as StatisticId, list[id])\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    save(): StatisticsSaveData {\r\n        const data = new StatisticsSaveData();\r\n        for (const id in this.list) {\r\n            data.addStatistic(id as StatisticId, this.list[id as StatisticId].value);\r\n        }\r\n        return data;\r\n    }\r\n\r\n}"],"sourceRoot":""}]}